(function(e){function t(t){for(var n,a,o=t[0],h=t[1],u=t[2],d=0,l=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&l.push(r[a][0]),r[a]=0;for(n in h)Object.prototype.hasOwnProperty.call(h,n)&&(e[n]=h[n]);c&&c(t);while(l.length)l.shift()();return s.push.apply(s,u||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],n=!0,o=1;o<i.length;o++){var h=i[o];0!==r[h]&&(n=!1)}n&&(s.splice(t--,1),e=a(a.s=i[0]))}return e}var n={},r={app:0},s=[];function a(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=n,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],h=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var c=h;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("cd49")},"1da18":function(e,t,i){e.exports=i.p+"img/bunny_riding.e24c0602.png"},"309b":function(e,t,i){},"38fd":function(e,t,i){e.exports=i.p+"img/stopper_idle.67fa3696.png"},"3a5d":function(e,t,i){"use strict";i("5cf8")},"3a94":function(e,t,i){e.exports=i.p+"img/bunny_flying.f6af0bd3.png"},4533:function(e,t,i){e.exports=i.p+"media/asteroid.700707dc.mp3"},"58ce":function(e,t,i){e.exports=i.p+"media/asteroid.960a0b4d.ogg"},"5cd1":function(e,t,i){e.exports=i.p+"media/ship.606800c8.ogg"},"5cf8":function(e,t,i){},"7e73":function(e,t,i){e.exports=i.p+"media/shoot.164324a9.ogg"},9833:function(e){e.exports=JSON.parse('{"frames":{"arrow_btn_active.png":{"frame":{"x":350,"y":1794,"w":55,"h":65},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":2,"w":55,"h":65},"sourceSize":{"w":56,"h":67}},"arrow_btn_hover.png":{"frame":{"x":1109,"y":1734,"w":55,"h":67},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":0,"w":55,"h":67},"sourceSize":{"w":56,"h":67}},"arrow_btn_press.png":{"frame":{"x":350,"y":1861,"w":55,"h":62},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1,"y":5,"w":55,"h":62},"sourceSize":{"w":56,"h":67}},"btn_fullscreen_active.png":{"frame":{"x":1675,"y":1803,"w":122,"h":107},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":4,"y":11,"w":122,"h":107},"sourceSize":{"w":130,"h":130}},"btn_fullscreen_hover.png":{"frame":{"x":1508,"y":1846,"w":122,"h":107},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":4,"y":11,"w":122,"h":107},"sourceSize":{"w":130,"h":130}},"btn_fullscreen_off.png":{"frame":{"x":1799,"y":1770,"w":121,"h":106},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":5,"y":12,"w":121,"h":106},"sourceSize":{"w":130,"h":130}},"btn_fullscreen_press.png":{"frame":{"x":1695,"y":1667,"w":122,"h":101},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":4,"y":17,"w":122,"h":101},"sourceSize":{"w":130,"h":130}},"btn_pause_active.png":{"frame":{"x":1644,"y":1122,"w":122,"h":107},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":4,"y":11,"w":122,"h":107},"sourceSize":{"w":130,"h":130}},"btn_pause_hover.png":{"frame":{"x":1767,"y":1001,"w":122,"h":107},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":4,"y":11,"w":122,"h":107},"sourceSize":{"w":130,"h":130}},"btn_pause_off.png":{"frame":{"x":1768,"y":1110,"w":121,"h":106},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":5,"y":12,"w":121,"h":106},"sourceSize":{"w":130,"h":130}},"btn_pause_press.png":{"frame":{"x":1768,"y":1434,"w":122,"h":101},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":4,"y":17,"w":122,"h":101},"sourceSize":{"w":130,"h":130}},"btn_sound_0_active.png":{"frame":{"x":1644,"y":1231,"w":122,"h":107},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":4,"y":11,"w":122,"h":107},"sourceSize":{"w":130,"h":130}},"btn_sound_0_hover.png":{"frame":{"x":1644,"y":1340,"w":122,"h":107},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":4,"y":11,"w":122,"h":107},"sourceSize":{"w":130,"h":130}},"btn_sound_0_off.png":{"frame":{"x":1768,"y":1218,"w":121,"h":106},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":5,"y":12,"w":121,"h":106},"sourceSize":{"w":130,"h":130}},"btn_sound_0_press.png":{"frame":{"x":1819,"y":1537,"w":122,"h":101},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":4,"y":17,"w":122,"h":101},"sourceSize":{"w":130,"h":130}},"btn_sound_1_active.png":{"frame":{"x":1644,"y":1449,"w":122,"h":107},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":4,"y":11,"w":122,"h":107},"sourceSize":{"w":130,"h":130}},"btn_sound_1_hover.png":{"frame":{"x":1695,"y":1558,"w":122,"h":107},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":4,"y":11,"w":122,"h":107},"sourceSize":{"w":130,"h":130}},"btn_sound_1_off.png":{"frame":{"x":1768,"y":1326,"w":121,"h":106},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":5,"y":12,"w":121,"h":106},"sourceSize":{"w":130,"h":130}},"btn_sound_1_press.png":{"frame":{"x":1819,"y":1640,"w":122,"h":101},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":4,"y":17,"w":122,"h":101},"sourceSize":{"w":130,"h":130}},"coin_score_plate.png":{"frame":{"x":1314,"y":1803,"w":192,"h":66},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":192,"h":66},"sourceSize":{"w":192,"h":66}},"collect_coin_icon.png":{"frame":{"x":993,"y":1814,"w":100,"h":90},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":100,"h":90},"sourceSize":{"w":100,"h":90}},"collect_distance_icon.png":{"frame":{"x":1644,"y":1001,"w":121,"h":119},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":121,"h":119},"sourceSize":{"w":121,"h":119}},"header_info_plate.png":{"frame":{"x":607,"y":1643,"w":584,"h":89},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":584,"h":89},"sourceSize":{"w":584,"h":89}},"highleader_scores_plate.png":{"frame":{"x":407,"y":1903,"w":180,"h":50},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":180,"h":50},"sourceSize":{"w":180,"h":50}},"leadboard_button_active.png":{"frame":{"x":1644,"y":1,"w":302,"h":171},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":12,"y":8,"w":302,"h":171},"sourceSize":{"w":326,"h":186}},"leadboard_button_hover.png":{"frame":{"x":1644,"y":174,"w":302,"h":171},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":12,"y":8,"w":302,"h":171},"sourceSize":{"w":326,"h":186}},"leadboard_button_press.png":{"frame":{"x":1644,"y":693,"w":292,"h":152},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":17,"y":18,"w":292,"h":152},"sourceSize":{"w":326,"h":186}},"midleader_name_plate.png":{"frame":{"x":1,"y":1751,"w":427,"h":41},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":427,"h":41},"sourceSize":{"w":427,"h":41}},"midleader_scores_plate.png":{"frame":{"x":1508,"y":1803,"w":165,"h":41},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":165,"h":41},"sourceSize":{"w":165,"h":41}},"ok_button_active.png":{"frame":{"x":1109,"y":1803,"w":203,"h":123},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":7,"y":12,"w":203,"h":123},"sourceSize":{"w":216,"h":138}},"ok_button_hover.png":{"frame":{"x":589,"y":1814,"w":203,"h":123},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":7,"y":12,"w":203,"h":123},"sourceSize":{"w":216,"h":138}},"ok_button_press.png":{"frame":{"x":794,"y":1814,"w":197,"h":107},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":10,"y":22,"w":197,"h":107},"sourceSize":{"w":216,"h":138}},"place_1.png":{"frame":{"x":1193,"y":1643,"w":500,"h":78},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":500,"h":78},"sourceSize":{"w":500,"h":78}},"place_2.png":{"frame":{"x":1193,"y":1723,"w":500,"h":78},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":500,"h":78},"sourceSize":{"w":500,"h":78}},"place_3.png":{"frame":{"x":607,"y":1734,"w":500,"h":78},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":500,"h":78},"sourceSize":{"w":500,"h":78}},"play_button_active.png":{"frame":{"x":1644,"y":347,"w":302,"h":171},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":12,"y":8,"w":302,"h":171},"sourceSize":{"w":326,"h":186}},"play_button_hover.png":{"frame":{"x":1644,"y":520,"w":302,"h":171},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":12,"y":8,"w":302,"h":171},"sourceSize":{"w":326,"h":186}},"play_button_off.png":{"frame":{"x":1,"y":1794,"w":347,"h":155},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":16,"y":13,"w":347,"h":155},"sourceSize":{"w":380,"h":200}},"play_button_press.png":{"frame":{"x":1644,"y":847,"w":292,"h":152},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":17,"y":18,"w":292,"h":152},"sourceSize":{"w":326,"h":186}},"rays.png":{"frame":{"x":1,"y":1,"w":1641,"h":1640},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":1641,"h":1640},"sourceSize":{"w":1641,"h":1640}},"star.png":{"frame":{"x":430,"y":1751,"w":157,"h":150},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":157,"h":150},"sourceSize":{"w":157,"h":150}},"user_name_bar.png":{"frame":{"x":1,"y":1643,"w":604,"h":106},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":604,"h":106},"sourceSize":{"w":604,"h":106}}},"animations":{"place":["place_1.png","place_2.png","place_3.png"]},"meta":{"app":"https://www.codeandweb.com/texturepacker","version":"1.0","image":"gui.png","format":"RGBA8888","size":{"w":1947,"h":1954},"scale":"1","smartupdate":"$TexturePacker:SmartUpdate:d3ad43b48ab4c0b435874bf7aa8f2ba4:9139bd5dc21c320d4d929aa606e359f6:788b34ed4e778d63c84b2c3df4d44949$"}}')},b750:function(e,t,i){e.exports=i.p+"media/shoot.ecff5374.mp3"},cd49:function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"wrap_container",attrs:{id:"app"}},[i("game",{staticClass:"wrap_container"})],1)},s=[],a=i("d4ec"),o=i("bee2"),h=i("262e"),u=i("2caf"),c=i("9ab4"),d=(i("309b"),i("1b40")),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{ref:"game",staticClass:"game wrap_container"})])},f=[],g=i("1da1"),p=(i("96cf"),i("d3b7"),i("398f")),m=(i("18a5"),i("7aaa")),w=function e(t){Object(a["a"])(this,e),this.animation=t},y=function(){function e(){Object(a["a"])(this,e),this.toPlay=[]}return Object(o["a"])(e,[{key:"play",value:function(e){this.toPlay.push(e)}}]),e}(),v=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(a["a"])(this,e),this.radius=0,this.width=0,this.height=0,this.radius=t,this.width=i,this.height=n},b=function e(t){Object(a["a"])(this,e),this.countdown=t},x=function e(t){Object(a["a"])(this,e),this.displayObject=t},_=function(){function e(){Object(a["a"])(this,e),this.state=e.INTRO,this.lives=0,this.level=0,this.hits=0,this.shots=0}return Object(o["a"])(e,[{key:"setForStart",value:function(){this.lives=3,this.level=0,this.hits=0,this.shots=0,this.state=e.PLAY}},{key:"setForFinish",value:function(){this.state=e.GAME_END}},{key:"update",value:function(e){this.lives=e.lives,this.level=e.level,this.hits=e.hits,this.shots=e.shots,this.state=e.state}}]),e}();_.INTRO="intro",_.PLAY="play",_.PAUSE="pause",_.GAME_END="end",_.LEADERS="leaders";var S=function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(a["a"])(this,e),this.velocityX=t,this.velocityY=i,this.angularVelocity=n,this.damping=r},k=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(a["a"])(this,e),this.left=t,this.right=i,this.top=n,this.down=r},T=function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(a["a"])(this,e),this.x=t,this.y=i,this.rotation=n},O=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Object(a["a"])(this,e),this.time=n,this.startX=0,this.startY=0,this.startAngle=0,this.magnitude=16,this.tiltAngle=1,this.randomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},this.displayObject=t,this.magnitude=i,this.startX=t.x,this.startY=t.y,this.startAngle=t.rotation}return Object(o["a"])(e,[{key:"animate",value:function(e){this.time-=e,this.upAndDownShake()}},{key:"upAndDownShake",value:function(){var e=this.displayObject;if(this.time>=0){e.x=this.startX,e.y=this.startY;var t=this.magnitude*this.time;e.x+=this.randomInt(-t,t),e.y+=this.randomInt(-t,t)}else e.x=this.startX,e.y=this.startY}},{key:"angularShake",value:function(){var e=this.displayObject;if(this.time>=0){var t=this.magnitude*this.time;e.rotation=this.startAngle+t*this.tiltAngle/100,this.tiltAngle*=-1}else e.rotation=this.startAngle}}]),e}(),E=function e(){Object(a["a"])(this,e)},A=function e(t){Object(a["a"])(this,e),this.fsm=t};A.IDLE="idle",A.RIDING="riding",A.FLYING="flying",A.FELT="felt";var j=function e(t){Object(a["a"])(this,e),this.displayObject=t},C=function(){function e(t){Object(a["a"])(this,e),this.slopeView=null,this.slopeView=t}return Object(o["a"])(e,[{key:"velocityX",set:function(e){this.slopeView&&(this.slopeView.velosityX=e)}}]),e}(),D=function(){function e(t,i){Object(a["a"])(this,e),this.screenScale=1,this.screenWidth=e.DEFAULT_SCREEN_WIDTH,this.screenHeight=e.DEFAULT_SCREEN_HEIGHT,this.floorElementWidth=400,this.floorElementHeight=300,e.__instanse||(e.__instanse=this,this.screenWidth=t,this.screenHeight=i)}return Object(o["a"])(e,null,[{key:"screenWidth",get:function(){return e.__instanse?e.__instanse.screenWidth:e.DEFAULT_SCREEN_WIDTH}},{key:"screenHeight",get:function(){return e.__instanse?e.__instanse.screenHeight:e.DEFAULT_SCREEN_HEIGHT}},{key:"scaleTexture",get:function(){return e.__instanse.screenScale}},{key:"floorElementWidth",get:function(){return e.__instanse?e.__instanse.floorElementWidth:400}},{key:"floorElementHeight",get:function(){return e.__instanse?e.__instanse.floorElementHeight:300}}]),e}();D.__instanse=null,D.DEFAULT_LIVES_COUNT=3,D.DEFAULT_SCREEN_WIDTH=800,D.DEFAULT_SCREEN_HEIGHT=600,D.DEFAULT_SCREEN_SIZE_AREA=D.DEFAULT_SCREEN_WIDTH*D.DEFAULT_SCREEN_HEIGHT,D.DEFAULT_ASTEROIDS_MIN_COUNT=2,D.DEFAULT_ASTEROID_MAX_SIZE=30,D.DEFAULT_CAMERA_SHAKE_MAGNITUDE_FOR_ASTEROID=D.DEFAULT_ASTEROID_MAX_SIZE/8,D.DEFAULT_CAMERA_SHAKE_TIME_FOR_ASTEROID=2,D.DEFAULT_CAMERA_SHAKE_MAGNITUDE_FOR_SPACESHIP=D.DEFAULT_ASTEROID_MAX_SIZE/4,D.DEFAULT_CAMERA_SHAKE_TIME_FOR_SPACESHIP=3,D.SCALE_SCREEN_TO_DEFAULT_SCREEN_SIZE_AREA=!0,D.DRAW_ROUGH=!0;var z=function(e){Object(h["a"])(i,e);var t=Object(u["a"])(i);function i(e){var n;Object(a["a"])(this,i),n=t.call(this),n.texture=e,n.MIN_TILES_COUNT=4,n.WIDTH=512,n.HEIGHT=64,n.tiles=[],n.left=0,n.velosityX=0,n.scale.set(.5),n.WIDTH=n.texture.width,n.HEIGHT=n.texture.height;var r=Math.max(n.MIN_TILES_COUNT,2*Math.floor(D.screenWidth/n.WIDTH));n.left=r*n.WIDTH*-1/2;var s=n.getTile("0");s.setTransform(n.left),n.tiles.push(s),n.addChild(s);for(var o=1;o<r;o++){var h=n.getTile(o+"");h.setTransform(n.tiles[n.tiles.length-1].x+n.WIDTH),n.tiles.push(h),n.addChild(h)}return n}return Object(o["a"])(i,[{key:"getTile",value:function(e){var t=new m["c"](this.texture);return t}},{key:"animate",value:function(e){if(this.tiles.length){this.tiles[0].setTransform(this.tiles[0].x+this.velosityX*e);for(var t=1;t<this.tiles.length;t++)this.tiles[t].setTransform(this.tiles[t-1].x+this.WIDTH,0);this.tiles[0].x<=this.left-this.WIDTH&&(this.tiles[0].setTransform(this.tiles[this.tiles.length-1].x+this.WIDTH,0),this.tiles.push(this.tiles.shift()),this.addChild(this.tiles[this.tiles.length-1]))}}}]),i}(m["b"]),I=38,N=Object(p["defineNode"])({animation:w},"AnimationNode"),M=Object(p["defineNode"])({audio:y},"AudioNode"),L=Object(p["defineNode"])({death:b},"DeathThroesNode"),R=Object(p["defineNode"])({state:_},"GameNode"),F=(Object(p["defineNode"])({control:k,position:T,motion:S},"MotionControlNode"),Object(p["defineNode"])({position:T,motion:S},"MovementNode")),B=Object(p["defineNode"])({position:T,display:x},"RenderNode"),H=Object(p["defineNode"])({position:T,display:j},"RenderNode"),P=Object(p["defineNode"])({bunny:A,position:T,collision:v,control:k,motion:S},"BunnyControlNode"),U=Object(p["defineNode"])({bunny:A,position:T,collision:v},"BunnyCollisionNode"),G=(Object(p["defineNode"])({shake:O},"CameraShakeNode"),Object(p["defineNode"])({bunny:A,position:T,motion:S},"BunnyNode")),X=Object(p["defineNode"])({slope:C,position:T},"SlopeNode"),Y=Object(p["defineNode"])({barrier:E,position:T,collision:v},"BarrierCollisionNode"),W={GAME:"game",CAMERA:"camera"},V=function(){function e(t,i,n){Object(a["a"])(this,e),this.cameraPosition=new T(0,0),this.engine=t,this.config=i,this.assets=n}return Object(o["a"])(e,[{key:"getAssets",value:function(){return this.assets}},{key:"createBarrier",value:function(e){var t=new m["c"](this.assets.getTexture("stopper_idle"));t.anchor.set(.5);var i=(new p["Entity"]).add(new E).add(new x(t)).add(new T(e,-t.height/2)).add(new v(t.width/2));return this.engine.addEntity(i),i}},{key:"createBunny",value:function(){var e=new p["Entity"],t=new p["EntityStateMachine"](e),i=new S(2e3,0,0,0),n=new m["c"](this.getAssets().getTexture("bunny_riding"));n.anchor.set(.5,1),n.scale.set(.1);var r=new m["c"](this.getAssets().getTexture("bunny_flying"));return r.anchor.set(.5,1),r.scale.set(.1),t.createState(A.IDLE).add(S).withInstance(i).add(x).withInstance(new x(r)).add(v).withInstance(new v(r.width)),t.createState(A.RIDING).add(S).withInstance(i).add(k).withInstance(new k(0,0,I,0)).add(x).withInstance(new x(n)).add(v).withInstance(new v(n.width)),t.createState(A.FLYING).add(S).withInstance(i).add(x).withInstance(new x(r)).add(v).withInstance(new v(r.width)),e.add(new A(t)).add(this.cameraPosition),t.changeState(A.IDLE),this.engine.addEntity(e),e}},{key:"createSlope",value:function(){var e=new z(this.getAssets().getTexture("floor")),t=(new p["Entity"]).add(new C(e)).add(new x(e)).add(new T(D.screenWidth/2,-10)).add(new w(e));return this.engine.addEntity(t),t}},{key:"destroyEntity",value:function(e){this.engine.removeEntity(e)}},{key:"showPopup",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;this.removePopup();var n=(new p["Entity"]).add(new j(e)).add(new T(t,i,0));return this.engine.addEntity(n),n}},{key:"removePopup",value:function(){var e=this.engine.getNodeList(H);while(e&&e.head)this.destroyEntity(e.head.entity)}},{key:"changeGameState",value:function(e){var t=this.engine.getNodeList(R);t&&t.head&&(t.head.state.state=e)}},{key:"registerCameraContainer",value:function(e){var t=new p["Entity"](W.CAMERA).add(new x(e));return this.engine.addEntity(t),t}},{key:"createGame",value:function(){var e=new p["Entity"](W.GAME).add(new _);return this.engine.addEntity(e),e}},{key:"cameraShake",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.engine.getEntityByName(W.CAMERA);if(!i)return null;var n=(new p["Entity"]).add(new b(1)).add(new w(new O(i.get(x).displayObject,e,t)));return this.engine.addEntity(n),n}},{key:"cameraBlur",value:function(e){var t=this.engine.getEntityByName(W.CAMERA);t&&(t.get(x).displayObject.filters=e?[new m["f"].BlurFilter]:[])}}]),e}(),J=(i("ddb0"),i("143c"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),32),K=function(){function e(){var t=this;Object(a["a"])(this,e),this.keys=new Int32Array(4),this.keyDownHandler=function(e){var i=e.keyCode,n=Math.floor(i/J);t.keys[n]|=1<<i-n*J},this.keyUpHandler=function(e){var i=e.keyCode,n=Math.floor(i/J);t.keys[n]&=~(1<<i-n*J)},window.addEventListener("keyup",this.keyUpHandler),window.addEventListener("keydown",this.keyDownHandler)}return Object(o["a"])(e,[{key:"isDown",value:function(e){var t=Math.floor(e/J);return 0!==(this.keys[t]&1<<e-t*J)}},{key:"isUp",value:function(e){return!this.isDown(e)}}]),e}(),Z=function(e){Object(h["a"])(i,e);var t=Object(u["a"])(i);function i(){return Object(a["a"])(this,i),t.call(this,N)}return Object(o["a"])(i,[{key:"updateNode",value:function(e,t){e.animation.animation.animate(t)}}]),i}(p["ListIteratingSystem"]),$=i("b85c"),q=(p["ListIteratingSystem"],i("4057"),function(e){Object(h["a"])(i,e);var t=Object(u["a"])(i);function i(e){var n;return Object(a["a"])(this,i),n=t.call(this),n.bunny=null,n.barriers=null,n.creator=e,n}return Object(o["a"])(i,[{key:"addToEngine",value:function(e){this.bunny=e.getNodeList(U),this.barriers=e.getNodeList(Y)}},{key:"update",value:function(e){if(this.bunny&&this.bunny.head){this.bunny.head.position.y>0&&(this.bunny.head.position.y=0,this.bunny.head.bunny.fsm.changeState(A.RIDING));for(var t=null===(i=this.barriers)||void 0===i?void 0:i.head;t;t=t.next){var i,n=Math.hypot(t.position.x-this.bunny.head.position.x,t.position.y-this.bunny.head.position.y);if(n<=t.collision.radius+this.bunny.head.collision.radius){this.creator.cameraShake();break}}}}},{key:"removeFromEngine",value:function(e){this.bunny=null,this.barriers=null}}]),i}(p["System"])),Q=function(e){Object(h["a"])(i,e);var t=Object(u["a"])(i);function i(e){var n;return Object(a["a"])(this,i),n=t.call(this,L),n.creator=e,n}return Object(o["a"])(i,[{key:"updateNode",value:function(e,t){e.death.countdown-=t,e.death.countdown<=0&&this.creator.destroyEntity(e.entity)}}]),i}(p["ListIteratingSystem"]),ee=function(e){Object(h["a"])(i,e);var t=Object(u["a"])(i);function i(e){var n;Object(a["a"])(this,i),n=t.call(this),n.creator=e,n.resolve=null,n.reject=null;var r=.1*Math.min(D.screenHeight,D.screenWidth),s=D.screenWidth-2*r,o=D.screenHeight-2*r;n.background=n.setupBackground(),n.title=n.setupTitle(),n.setupContent();var h=Math.min(s/n.background.width,o/n.background.height);return n.background.scale.set(h),n}return Object(o["a"])(i,[{key:"execute",value:function(){var e=this;return this.showPopup(),new Promise((function(t,i){e.resolve=t,e.reject=i}))}},{key:"showPopup",value:function(){this.creator.showPopup(this,(D.screenWidth-this.width)/2,(D.screenHeight-this.height)/2)}},{key:"setupContent",value:function(){console.log("expand it")}},{key:"setupBackground",value:function(){var e=new m["c"](this.creator.getAssets().getTexture("info_plate_big")),t=new m["c"](this.creator.getAssets().getTexture("header_info_plate"));return t.position.x=(e.width-t.width)/2,t.position.y=5,e.addChild(t),this.addChild(e),e}},{key:"setupTitle",value:function(){var e=new m["e"]({fontFamily:"Arial",fontSize:60,fill:153}),t=new m["d"]("",e);return t.anchor.set(.5),t.setTransform(this.background.width/2,t.height/2+5),this.background.addChild(t),t}}]),i}(m["b"]),te=i("9e12"),ie=i.n(te),ne=function(e){Object(h["a"])(i,e);var t=Object(u["a"])(i);function i(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object(a["a"])(this,i),n=t.call(this,e),n.isDown=!1,n.isOver=!1,n.signalClick=new ie.a.Signal,n.onButtonDown=function(e){n.isDown=!0,n.texture=n.textureButtonDown},n.onButtonUp=function(e){n.isDown&&n.signalClick.dispatch(),n.isDown=!1,n.isOver?n.texture=n.textureButtonOver:n.texture=n.textureButton},n.onButtonOver=function(e){n.isOver=!0,n.isDown||(n.texture=n.textureButtonOver)},n.onButtonOut=function(e){n.isOver=!1,n.isDown||(n.texture=n.textureButton)},n.textureButton=e,n.textureButtonDown=s||e,n.textureButtonOver=r||e,n.interactive=!0,n.buttonMode=!0,n.anchor.set(.5,.5),n.on("pointerdown",n.onButtonDown).on("pointerup",n.onButtonUp).on("pointerupoutside",n.onButtonUp).on("pointerover",n.onButtonOver).on("pointerout",n.onButtonOut),n}return i}(m["c"]),re=function(e){Object(h["a"])(i,e);var t=Object(u["a"])(i);function i(e){var n;return Object(a["a"])(this,i),n=t.call(this,e),n.creator=e,n.score=null,n.coins=null,n.distance=null,n.handleClick=function(e){n.resolve&&n.resolve()},n.title.text="Твои очки:",n}return Object(o["a"])(i,[{key:"setupContent",value:function(){var e=this,t=new ne(this.creator.getAssets().getTexture("ok_button_active"),this.creator.getAssets().getTexture("ok_button_hover"),this.creator.getAssets().getTexture("ok_button_press"));t.anchor.set(.5),t.position.x=this.background.width/2,t.position.y=this.background.height-.9*t.height,t.signalClick.add((function(){e.handleOk()})),this.background.addChild(t);var i=new m["e"]({fontFamily:"Arial",fontSize:60,fill:16777215});this.score=new m["d"]("очки",i),this.score.anchor.set(.5),this.score.position.x=.5*this.background.width,this.score.position.y=.2*this.background.height,this.background.addChild(this.score),i=new m["e"]({fontFamily:"Arial",fontSize:60,fill:16035109}),this.coins=new m["d"]("монеты",i),this.coins.anchor.set(.5),this.coins.position.x=.5*this.background.width,this.coins.position.y=.4*this.background.height,this.background.addChild(this.coins),i=new m["e"]({fontFamily:"Arial",fontSize:60,fill:10143487}),this.distance=new m["d"]("дистанция",i),this.distance.anchor.set(.5),this.distance.position.x=.5*this.background.width,this.distance.position.y=.6*this.background.height,this.background.addChild(this.distance);var n=new m["c"](this.creator.getAssets().getTexture("collect_coin_icon"));n.anchor.set(0,.5),n.position.x=.1*this.background.width,n.position.y=this.coins.y,this.background.addChild(n);var r=new m["c"](this.creator.getAssets().getTexture("collect_distance_icon"));r.anchor.set(0,.5),r.position.x=n.x,r.position.y=this.distance.y,this.background.addChild(r)}},{key:"handleOk",value:function(){this.resolve&&this.resolve(this)}}]),i}(ee),se=function(e){Object(h["a"])(i,e);var t=Object(u["a"])(i);function i(e){var n;return Object(a["a"])(this,i),n=t.call(this,e),n.creator=e,n.background.alpha=0,n}return Object(o["a"])(i,[{key:"setupContent",value:function(){var e=this,t=new ne(this.creator.getAssets().getTexture("arrow_btn_active"),this.creator.getAssets().getTexture("arrow_btn_hover"),this.creator.getAssets().getTexture("arrow_btn_press"));t.anchor.set(.5),t.scale.set(-1,1),t.position.x=0,t.position.y=0,t.signalClick.add((function(){e.handleLeftArrowClick()})),this.addChild(t);var i=new m["e"]({fontFamily:"Arial",fontSize:40,fill:16777215}),n=new m["d"]("Выйти из игры",i);n.anchor.set(0,.5),n.position.x=1.3*t.width,n.position.y=0,this.addChild(n)}},{key:"showPopup",value:function(){this.creator.showPopup(this,100,50)}},{key:"handleLeftArrowClick",value:function(){this.resolve&&this.resolve(this)}}]),i}(ee),ae=function(e){Object(h["a"])(i,e);var t=Object(u["a"])(i);function i(e){var n;return Object(a["a"])(this,i),n=t.call(this,e),n.creator=e,n.record=null,n.userName=null,n.title.text="Твои рекорды:",n}return Object(o["a"])(i,[{key:"setupContent",value:function(){var e=this,t=new ne(this.creator.getAssets().getTexture("leadboard_button_active"),this.creator.getAssets().getTexture("leadboard_button_hover"),this.creator.getAssets().getTexture("leadboard_button_press"));t.position.x=(this.background.width-t.width)/2*.95,t.position.y=this.background.height-.9*t.height,t.signalClick.add((function(){e.handleLeaders()})),this.background.addChild(t);var i=new ne(this.creator.getAssets().getTexture("play_button_active"),this.creator.getAssets().getTexture("play_button_hover"),this.creator.getAssets().getTexture("play_button_press"));i.position.x=this.background.width-t.position.x,i.position.y=t.y,i.signalClick.add((function(){e.handlePlay()})),this.background.addChild(i);var n=new m["c"](this.creator.getAssets().getTexture("user_name_bar"));n.position.x=(this.background.width-n.width)/2,n.position.y=this.background.height/2+n.height/2,this.background.addChild(n);var r=new m["e"]({fontFamily:"Arial",fontSize:60,fill:16777215});this.record=new m["d"]("Рекорд: 3981",r),this.record.anchor.set(.5),this.record.position.x=.5*this.background.width,this.record.position.y=.3*this.background.height,this.background.addChild(this.record),this.userName=new m["d"]("Guest_NEMO",r),this.userName.anchor.set(0,0),this.userName.position.x=1.3*n.position.x,this.userName.position.y=n.position.y+(n.height-this.userName.height)/2,this.background.addChild(this.userName)}},{key:"handlePlay",value:function(){this.resolve&&this.resolve(this)}},{key:"handleLeaders",value:function(){this.reject&&this.reject(this)}}]),i}(ee),oe=(i("b0c0"),function e(t,i){Object(a["a"])(this,e),this.name=t,this.score=i}),he=function(){function e(){Object(a["a"])(this,e)}return Object(o["a"])(e,null,[{key:"getLeaders",value:function(){function e(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function t(e){for(var t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=i.length,r=0;r<e;r++)t+=i.charAt(Math.floor(Math.random()*n));return t}for(var i=[],n=Math.floor(Date.now()/1e5),r=e(0,10),s=0;s<r;s++)i.push(new oe(t(e(6,15)),Math.floor(n/(10*(s+1)))));return new Promise((function(e){setTimeout((function(){e(i)}),500)}))}}]),e}(),ue=function(e){Object(h["a"])(i,e);var t=Object(u["a"])(i);function i(e,n,r){var s;Object(a["a"])(this,i),s=t.call(this),s.index=e,s.user=n,s.creator=r;var o=new m["c"](s.getBackgroundTexture());if(s.addChild(o),s.index>2){var h=new m["e"]({fontFamily:"Arial",fontSize:30,fill:16777215}),u=new m["d"]("".concat(s.index+1),h);u.position.x=.5*o.height,s.addChild(u),o.position.x+=1.5*o.height}var c=new m["c"](s.creator.getAssets().getTexture(s.index>2?"midleader_scores_plate":"highleader_scores_plate"));c.position.x=o.position.x+o.width+(s.index>2?.9*c.height:.2*c.height),c.position.y=(o.height-c.height)/2,s.addChild(c);var d=new m["e"]({fontFamily:"Arial",fontSize:s.index>2?30:40,fill:s.getTextColor()}),l=new m["d"](s.user?s.user.name:"-",d);l.position.x=80,l.position.y=(o.height-l.height)/2,s.addChild(l);var f=new m["d"]("".concat(s.user?s.user.score:"-"),d);return f.anchor.set(.5,.5),f.position.x=c.x+c.width/2,f.position.y=o.height/2,s.addChild(f),s}return Object(o["a"])(i,[{key:"getTextColor",value:function(){switch(this.index){case 0:return 12673025;case 1:return 2120879;case 2:return 9050624;default:return 3355443}}},{key:"getBackgroundTexture",value:function(){return this.index<3?this.creator.getAssets().getTexture("place_".concat(this.index+1)):this.creator.getAssets().getTexture("midleader_name_plate")}}]),i}(m["b"]),ce=function(e){Object(h["a"])(i,e);var t=Object(u["a"])(i);function i(e){var n;Object(a["a"])(this,i),n=t.call(this),n.creator=e,n.tables=["Всё время","Mесяц","Неделя"],n.currentTable=0,n.currentTableText=null,n.leftArrow=null,n.rightArrow=null,n.table=null,n.resolve=null,n.reject=null;var r=.1*Math.min(D.screenHeight,D.screenWidth),s=D.screenWidth-2*r,o=D.screenHeight-2*r;n.background=n.setupBackground(),n.title=n.setupTitle(),n.setupContent();var h=Math.min(s/n.background.width,o/n.background.height);return n.background.scale.set(h),n.title.text="Таблица рекордов:",n.table=new m["b"],n.background.addChild(n.table),setTimeout((function(){n.updateTable()}),100),n}return Object(o["a"])(i,[{key:"setupContent",value:function(){var e=this,t=new ne(this.creator.getAssets().getTexture("ok_button_active"),this.creator.getAssets().getTexture("ok_button_hover"),this.creator.getAssets().getTexture("ok_button_press"));t.anchor.set(.5),t.position.x=this.background.width/2,t.position.y=this.background.height-.9*t.height,t.signalClick.add((function(){e.handleOk()})),this.background.addChild(t);var i=new m["e"]({fontFamily:"Arial",fontSize:60,fill:16738305});this.currentTableText=new m["d"]("Всё время",i),this.currentTableText.anchor.set(.5),this.currentTableText.position.x=.5*this.background.width,this.currentTableText.position.y=.15*this.background.height,this.background.addChild(this.currentTableText),this.leftArrow=new ne(this.creator.getAssets().getTexture("arrow_btn_active"),this.creator.getAssets().getTexture("arrow_btn_hover"),this.creator.getAssets().getTexture("arrow_btn_press")),this.leftArrow.anchor.set(.5),this.leftArrow.scale.set(-1,1),this.leftArrow.position.x=.15*this.background.width,this.leftArrow.position.y=this.currentTableText.y,this.leftArrow.signalClick.add((function(){e.handleLeftArrowClick()})),this.background.addChild(this.leftArrow),this.rightArrow=new ne(this.creator.getAssets().getTexture("arrow_btn_active"),this.creator.getAssets().getTexture("arrow_btn_hover"),this.creator.getAssets().getTexture("arrow_btn_press")),this.rightArrow.anchor.set(.5),this.rightArrow.position.x=this.background.width-this.leftArrow.x,this.rightArrow.position.y=this.currentTableText.y,this.rightArrow.signalClick.add((function(){e.handleRightArrowClick()})),this.background.addChild(this.rightArrow)}},{key:"updateTable",value:function(){var e=this;this.table.removeChildren(),this.currentTableText&&(this.currentTableText.text=this.tables[this.currentTable]);var t=new m["e"]({fontFamily:"Arial",fontSize:40,fill:3355443}),n=new m["d"]("Загрузка...",t);n.anchor.set(.5),n.position.x=.5*this.background.width,n.position.y=.5*this.background.height,this.background.addChild(n),he.getLeaders().then((function(t){n&&n.parent.removeChild(n);for(var r=e.currentTableText.y+e.currentTableText.height/2,s=0;s<i.TABLE_ROWS_COUNT;s++){var a,o=t.length>s?t[s]:null,h=new ue(s,o,e.creator);h.position.y=r+(s>2?.1*h.height:0),h.position.x=e.leftArrow.position.x-1.5*e.leftArrow.width,r=h.position.y+h.height,null===(a=e.table)||void 0===a||a.addChild(h)}}))}},{key:"handleLeftArrowClick",value:function(){this.currentTable++,this.currentTable=this.currentTable>=this.tables.length?0:this.currentTable,this.updateTable()}},{key:"handleRightArrowClick",value:function(){this.currentTable--,this.currentTable=this.currentTable<0?this.tables.length-1:this.currentTable,this.updateTable()}},{key:"handleOk",value:function(){this.resolve&&this.resolve(this)}},{key:"execute",value:function(){var e=this;return this.showPopup(),new Promise((function(t,i){e.resolve=t,e.reject=i}))}},{key:"showPopup",value:function(){this.creator.showPopup(this,(D.screenWidth-this.width)/2,(D.screenHeight-this.height)/2)}},{key:"setupBackground",value:function(){var e=new m["c"](this.creator.getAssets().getTexture("info_plate_big")),t=new m["c"](this.creator.getAssets().getTexture("header_info_plate"));return t.position.x=(e.width-t.width)/2,t.position.y=5,e.addChild(t),this.addChild(e),e}},{key:"setupTitle",value:function(){var e=new m["e"]({fontFamily:"Arial",fontSize:60,fill:153}),t=new m["d"]("",e);return t.anchor.set(.5),t.setTransform(this.background.width/2,t.height/2+5),this.background.addChild(t),t}}]),i}(m["b"]);ce.TABLE_ROWS_COUNT=10;var de,le=function(e){Object(h["a"])(i,e);var t=Object(u["a"])(i);function i(e,n){var r;return Object(a["a"])(this,i),r=t.call(this),r.games=null,r.bunny=null,r.currentGameState="",r.creator=e,r.config=n,r}return Object(o["a"])(i,[{key:"addToEngine",value:function(e){this.games=e.getNodeList(R),this.bunny=e.getNodeList(G),this.createGameView()}},{key:"removeFromEngine",value:function(e){this.games=null}},{key:"update",value:function(e){var t=this,i=this.games.head;if(i&&i.state.state&&i.state.state!=this.currentGameState){switch(i.state.state){case _.INTRO:this.bunny&&this.bunny.head&&this.bunny.head.bunny.fsm.changeState(A.IDLE),this.creator.cameraBlur(!0),new ae(this.creator).execute().then((function(){t.creator.changeGameState(_.PLAY)})).catch((function(){t.creator.changeGameState(_.LEADERS)}));break;case _.PLAY:setTimeout((function(){t.bunny&&t.bunny.head&&i.state.state==_.PLAY&&t.bunny.head.bunny.fsm.changeState(A.RIDING)}),500),this.creator.cameraBlur(!1),new se(this.creator).execute().then((function(){t.creator.changeGameState(_.GAME_END)}));break;case _.PAUSE:break;case _.GAME_END:this.bunny&&this.bunny.head&&this.bunny.head.bunny.fsm.changeState(A.IDLE),this.creator.cameraBlur(!0),new re(this.creator).execute().then((function(){t.creator.changeGameState(_.LEADERS)}));break;case _.LEADERS:this.bunny&&this.bunny.head&&this.bunny.head.bunny.fsm.changeState(A.IDLE),this.creator.cameraBlur(!0),new ce(this.creator).execute().then((function(){t.creator.changeGameState(_.INTRO)}));break}this.currentGameState=i.state.state}}},{key:"createGameView",value:function(){var e=this;setTimeout((function(){e.creator.createBunny()}),100)}}]),i}(p["System"]),fe=function(e){Object(h["a"])(i,e);var t=Object(u["a"])(i);function i(){var e;return Object(a["a"])(this,i),e=t.apply(this,arguments),e.game=null,e.gameState=new _,e}return Object(o["a"])(i,[{key:"addToEngine",value:function(e){this.game=e.getNodeList(R)}},{key:"removeFromEngine",value:function(e){this.game=null}},{key:"update",value:function(e){var t,i,n=null===(t=this.game)||void 0===t||null===(i=t.head)||void 0===i?void 0:i.state;n&&this.gameState.update(n)}}]),i}(p["System"]),ge=function(e){Object(h["a"])(i,e);var t=Object(u["a"])(i);function i(e,n){var r;return Object(a["a"])(this,i),r=t.call(this,P),r.keyPoll=e,r.touchPoll=n,r}return Object(o["a"])(i,[{key:"updateNode",value:function(e,t){var i=e.control,n=e.motion;(this.keyPoll.isDown(i.top)||this.touchPoll.click)&&(n.velocityY=-1300,e.bunny.fsm.changeState(A.FLYING))}}]),i}(p["ListIteratingSystem"]),pe=function(e){Object(h["a"])(i,e);var t=Object(u["a"])(i);function i(e,n){var r;return Object(a["a"])(this,i),r=t.call(this,F),r.gravity=50,r.creator=e,r.config=n,r}return Object(o["a"])(i,[{key:"updateNode",value:function(e,t){var i=e.position,n=e.motion;i.x+=n.velocityX*t,i.y+=n.velocityY*t,i.y<0?n.velocityY+=this.gravity:n.velocityY=0}}]),i}(p["ListIteratingSystem"]),me=function(e){Object(h["a"])(i,e);var t=Object(u["a"])(i);function i(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{emitStageEvents:!0},s=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;Object(a["a"])(this,i),n=t.call(this),n.resized=!1,n.nodes=null,n.guis=null,n.deltaX=0,n.deltaY=0,n.deltaAngle=.1,n.bunny=null,n.addGUI=function(e){var t=e.display.displayObject;n.guiContainer.addChild(t),n.updateGUI(e)},n.addToDisplay=function(e){var t=e.display.displayObject;n.gameContainer.addChild(t),n.updateNode(e),n.options.emitStageEvents&&t.emit("addedToStage")},n.handleWindowResize=function(e){n.resized=!0},n.removeFromDisplay=function(e){var t=e.display.displayObject;t.parent&&t.parent.removeChild(t)},n.container=e,n.options=r,n.entityCreator=s,n.gameConfig=o;var h=new m["a"]({width:n.gameConfig.screenWidth,height:n.gameConfig.screenHeight,backgroundColor:16777215});return n.renderer=h.renderer,n.renderer.backgroundColor=7248586,n.stage=h.stage,n.view=h.view,n.gameContainer=new m["b"],n.gameContainer.setTransform(0,0,1,1,n.deltaAngle),n.stage.addChild(n.gameContainer),n.guiContainer=new m["b"],n.stage.addChild(n.guiContainer),n.entityCreator.registerCameraContainer(n.gameContainer),n.resize(),n}return Object(o["a"])(i,[{key:"addToEngine",value:function(e){window.addEventListener("resize",this.handleWindowResize),this.container.appendChild(this.view),this.nodes=e.getNodeList(B);for(var t=this.nodes.head;t;t=t.next)this.addToDisplay(t);this.nodes.nodeAdded.add(this.addToDisplay),this.nodes.nodeRemoved.add(this.removeFromDisplay),this.guis=e.getNodeList(H);for(var i=this.guis.head;i;i=i.next)this.addGUI(i);this.guis.nodeAdded.add(this.addGUI),this.guis.nodeRemoved.add(this.removeFromDisplay),this.bunny=e.getNodeList(G)}},{key:"update",value:function(e){this.resized&&(this.resized=!1,this.resize()),this.bunny&&this.bunny.head?(this.deltaX=Math.round(-1*this.bunny.head.position.x+.3*this.gameConfig.screenWidth),this.deltaY=Math.round(-1*this.bunny.head.position.y+.6*this.gameConfig.screenHeight)):(this.deltaX=Math.round(.2*this.gameConfig.screenWidth),this.deltaY=Math.round(.6*this.gameConfig.screenHeight));for(var t=this.nodes.head;t;t=t.next)this.updateNode(t);this.renderer.render(this.stage)}},{key:"updateNode",value:function(e){var t=e.display,i=e.position;t.displayObject.setTransform(i.x+this.deltaX,i.y+this.deltaY,1,1,i.rotation)}},{key:"updateGUI",value:function(e){var t=e.display,i=e.position;t.displayObject.setTransform(i.x,i.y,1,1,i.rotation)}},{key:"resize",value:function(){var e=this.container.getBoundingClientRect();this.gameConfig.screenWidth=e.width,this.gameConfig.screenHeight=e.height,this.renderer.view.style.width=e.width+"px",this.renderer.view.style.height=e.height+"px",this.renderer.resize(e.width,e.height)}},{key:"removeFromEngine",value:function(e){this.nodes&&(this.nodes.nodeAdded.remove(this.addToDisplay),this.nodes.nodeRemoved.remove(this.removeFromDisplay),this.nodes=null),this.container.removeChild(this.view)}}]),i}(p["System"]);(function(e){e[e["preUpdate"]=1]="preUpdate",e[e["update"]=2]="update",e[e["move"]=3]="move",e[e["resolveCollisions"]=4]="resolveCollisions",e[e["animate"]=5]="animate",e[e["render"]=6]="render",e[e["audio"]=7]="audio"})(de||(de={}));i("4ec9"),i("3ca3"),i("d81d");var we,ye=i("4533"),ve=i.n(ye),be=i("58ce"),xe=i.n(be),_e=i("b750"),Se=i.n(_e),ke=i("7e73"),Te=i.n(ke),Oe=i("ced2"),Ee=i.n(Oe),Ae=i("5cd1"),je=i.n(Ae);(function(e){e[e["asteroid"]=0]="asteroid",e[e["ship"]=1]="ship",e[e["shoot"]=2]="shoot"})(we||(we={}));var Ce=[{key:we.asteroid,mp3:ve.a,ogg:xe.a},{key:we.shoot,mp3:Se.a,ogg:Te.a},{key:we.ship,mp3:Ee.a,ogg:je.a}];function De(){var e=document.createElement("audio"),t=e.canPlayType("audio/mpeg"),i=e.canPlayType("audio/ogg"),n=null;return"probably"===t?n="mp3":"probably"===i?n="ogg":"maybe"===t?n="mp3":"maybe"===i&&(n="ogg"),n}function ze(e){return Ie.apply(this,arguments)}function Ie(){return Ie=Object(g["a"])(regeneratorRuntime.mark((function e(t){var i,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=new Map,n=De(),r=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(n,r){var s,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return s=e.sent,e.next=5,s.arrayBuffer();case 5:return a=e.sent,e.next=8,t.decodeAudioData(a);case 8:o=e.sent,i.set(r,o);case 10:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),!n){e.next=6;break}return e.next=6,Promise.all(Ce.map((function(e){return r(e[n],e.key)})));case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)}))),Ie.apply(this,arguments)}var Ne=function(){function e(){var t=this;Object(a["a"])(this,e),this.mouseDown=!1,this.mouseDownX=0,this.mouseDownY=0,this.mouseDownTimestamp=0,this.mouseDownRadius=20,this.mouseMoveX=0,this.mouseMoveY=0,this.clickTimeout=500,this.distance=0,this.mouseLeft=!1,this.mouseRight=!1,this.mouseTop=!1,this.mouseBottom=!1,this.handleTouchStart=function(e){for(var i=0;i<e.touches.length;i++){t.mouseDown=!0,t.mouseDownX=e.touches[i].clientX,t.mouseDownY=e.touches[i].clientY,t.mouseDownTimestamp=Date.now();break}},this.handleTouchEnd=function(e){t.handleTouchMove(e),t.mouseDown=!1,t.resetDirections()},this.handleTouchMove=function(e){if(t.mouseDown)for(var i=0;i<e.touches.length;i++){t.mouseMoveX=e.touches[0].clientX,t.mouseMoveY=e.touches[0].clientY,t.distance=t.getDistance(t.mouseDownX,t.mouseDownY,t.mouseMoveX,t.mouseMoveY),t.distance>t.mouseDownRadius?t.mouseDownY-t.mouseMoveY>t.mouseDownRadius?t.mouseTop=!0:t.mouseDownX-t.mouseMoveX>t.mouseDownRadius?t.mouseLeft=!0:t.mouseMoveX-t.mouseDownX>t.mouseDownRadius?t.mouseRight=!0:t.mouseBottom=!0:t.resetDirections();break}},this.handleMouseDown=function(e){t.mouseDown=!0,t.mouseDownX=e.clientX,t.mouseDownY=e.clientY,t.mouseDownTimestamp=Date.now()},this.handleMouseUp=function(e){t.handleMouseMove(e),t.mouseDown=!1,t.resetDirections()},this.handleMouseMove=function(e){t.mouseDown&&(t.mouseMoveX=e.clientX,t.mouseMoveY=e.clientY,t.distance=t.getDistance(t.mouseDownX,t.mouseDownY,t.mouseMoveX,t.mouseMoveY),t.distance>t.mouseDownRadius?t.mouseDownY-t.mouseMoveY>t.mouseDownRadius?t.mouseTop=!0:t.mouseDownX-t.mouseMoveX>t.mouseDownRadius?t.mouseLeft=!0:t.mouseMoveX-t.mouseDownX>t.mouseDownRadius?t.mouseRight=!0:t.mouseBottom=!0:t.resetDirections())},window.addEventListener("mousedown",this.handleMouseDown),window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("mousemove",this.handleMouseMove),document.body.addEventListener("touchstart",this.handleTouchStart),document.body.addEventListener("touchend",this.handleTouchEnd),document.body.addEventListener("touchmove",this.handleTouchMove)}return Object(o["a"])(e,[{key:"getDistance",value:function(e,t,i,n){var r=e-i,s=t-n;return Math.sqrt(r*r+s*s)}},{key:"resetDirections",value:function(){this.mouseLeft=!1,this.mouseRight=!1,this.mouseTop=!1,this.mouseBottom=!1}},{key:"left",get:function(){return this.mouseLeft}},{key:"right",get:function(){return this.mouseRight}},{key:"top",get:function(){return this.mouseTop}},{key:"down",get:function(){return this.mouseBottom}},{key:"click",get:function(){return!this.mouseDown&&Date.now()-this.mouseDownTimestamp<=this.clickTimeout&&this.distance<this.mouseDownRadius}}]),e}(),Me=function(e){Object(h["a"])(i,e);var t=Object(u["a"])(i);function i(e,n){var r;return Object(a["a"])(this,i),r=t.call(this),r.barriers=null,r.bunny=null,r.slope=null,r.game=null,r.timeout=0,r.addBarrier=!1,r.creator=e,r.config=n,r}return Object(o["a"])(i,[{key:"addToEngine",value:function(e){this.barriers=e.getNodeList(Y),this.bunny=e.getNodeList(G),this.slope=e.getNodeList(X),this.game=e.getNodeList(R),this.slope.head||this.creator.createSlope()}},{key:"removeFromEngine",value:function(e){if(this.slope)while(this.slope.head)this.creator.destroyEntity(this.slope.head.entity);if(this.barriers)while(this.barriers.head)this.creator.destroyEntity(this.barriers.head.entity);this.barriers=null,this.bunny=null,this.slope=null,this.game=null}},{key:"update",value:function(e){var t=this;if(this.slope&&this.slope.head&&this.bunny&&this.bunny.head&&(this.slope.head.slope.velocityX=-this.bunny.head.motion.velocityX,this.slope.head.position.x=this.bunny.head.position.x),this.game&&this.game.head&&this.game.head.state.state==_.PLAY&&this.bunny&&this.bunny.head&&(this.timeout||(this.timeout=setTimeout((function(){t.addBarrier=!0,t.timeout=0}),Math.floor(1e3*(2*Math.random()+1)))),this.addBarrier)){this.creator.createBarrier(this.bunny.head.position.x+D.screenWidth),this.addBarrier=!1;for(var i=null===(n=this.barriers)||void 0===n?void 0:n.head;i;i=i.next){var n;i.position.x<this.bunny.head.position.x-this.config.screenWidth&&this.creator.destroyEntity(i.entity)}}}}]),i}(p["System"]),Le=i("e829"),Re=i.n(Le),Fe=i("3a94"),Be=i.n(Fe),He=i("1da18"),Pe=i.n(He),Ue=i("38fd"),Ge=i.n(Ue),Xe=i("da34"),Ye=i.n(Xe),We=i("9833"),Ve=i("fe94"),Je=i.n(Ve),Ke=i("758d"),Ze=function(){function e(){Object(a["a"])(this,e),this.json=null,this.map=new Map}return Object(o["a"])(e,[{key:"execute",value:function(){var e=this,t=[];return t.push(this.loadJSON(We)),t.push(this.loadImage(Re.a)),t.push(this.loadImage(Be.a)),t.push(this.loadImage(Pe.a)),t.push(this.loadImage(Ge.a)),t.push(this.loadImage(Ye.a)),t.push(this.loadImage(Je.a)),Promise.all(t).then((function(){return Promise.resolve(e)}))}},{key:"getImageFromMap",value:function(e){for(var t=this.map.keys(),i=t.next().value;i;i=t.next().value)if(i.indexOf(e)>-1)return this.map.get(i);return null}},{key:"getTexture",value:function(e){var t=this.getImageFromMap(e);if(t)return Ke["q"].from(t);if(this.json.frames["".concat(e,".png")]){var i=this.json.frames["".concat(e,".png")],n=this.getImageFromMap("gui"),r=document.createElement("canvas");r.width=i.spriteSourceSize.w,r.height=i.spriteSourceSize.h;var s=r.getContext("2d");return s.drawImage(n,i.frame.x,i.frame.y,i.frame.w,i.frame.h,0,0,r.width,r.height),Ke["q"].from(r)}return null}},{key:"loadImage",value:function(e){var t=this;return new Promise((function(i){var n=document.createElement("img");n.onload=function(){var r=document.createElement("canvas");r.width=n.width,r.height=n.height;var s=r.getContext("2d");s.drawImage(n,0,0),t.map.set(e,r),i(!0)},n.src=e}))}},{key:"loadJSON",value:function(e){var t=this;return new Promise((function(i){t.json=e,i(!0)}))}}]),e}();function $e(e){return qe.apply(this,arguments)}function qe(){return qe=Object(g["a"])(regeneratorRuntime.mark((function e(t){var i,n,r,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=s.length>1&&void 0!==s[1]?s[1]:1,n=null,r=function e(r){i--,i||(t.remove(e),n(!0))},e.abrupt("return",new Promise((function(e){n=e,t.add(r)})));case 4:case"end":return e.stop()}}),e)}))),qe.apply(this,arguments)}function Qe(e){return et.apply(this,arguments)}function et(){return et=Object(g["a"])(regeneratorRuntime.mark((function e(t){var i,n,r,s,a,o,h,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=new Ze,e.next=3,i.execute();case 3:return n=new D(t.clientWidth,t.clientHeight),r=new p["Engine"],s=new V(r,n,i),a=new K,o=new Ne,h=new p["FrameTickProvider"],u=new AudioContext,e.next=12,ze(u);case 12:return e.sent,h.add((function(e){return r.update(e)})),h.start(),r.addSystem(new me(t,{emitStageEvents:!0},s,n),de.render),e.next=18,$e(h,100);case 18:r.addSystem(new le(s,n),de.preUpdate),r.addSystem(new ge(a,o),de.update),r.addSystem(new Q(s),de.update),r.addSystem(new pe(s,n),de.move),r.addSystem(new q(s),de.resolveCollisions),r.addSystem(new Z,de.animate),r.addSystem(new fe,de.preUpdate),r.addSystem(new Me(s,n),de.preUpdate),s.createGame();case 27:case"end":return e.stop()}}),e)}))),et.apply(this,arguments)}var tt=function(e){Object(h["a"])(i,e);var t=Object(u["a"])(i);function i(){return Object(a["a"])(this,i),t.apply(this,arguments)}return Object(o["a"])(i,[{key:"mounted",value:function(){var e=this;setTimeout((function(){Qe(e.$refs.game)}),100)}},{key:"destroyed",value:function(){console.log("Game","destroyed")}},{key:"handleClick",value:function(){console.log(" CLICK")}}]),i}(d["b"]);tt=Object(c["a"])([Object(d["a"])({components:{}})],tt);var it=tt,nt=it,rt=(i("3a5d"),i("2877")),st=Object(rt["a"])(nt,l,f,!1,null,"77c8f861",null),at=st.exports,ot=function(e){Object(h["a"])(i,e);var t=Object(u["a"])(i);function i(){return Object(a["a"])(this,i),t.apply(this,arguments)}return Object(o["a"])(i,[{key:"mounted",value:function(){console.log("App mounted")}}]),i}(d["b"]);ot=Object(c["a"])([Object(d["a"])({components:{Game:at}})],ot);var ht=ot,ut=ht,ct=Object(rt["a"])(ut,r,s,!1,null,null,null),dt=ct.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(dt)}}).$mount("#app")},ced2:function(e,t,i){e.exports=i.p+"media/ship.fc37c3a9.mp3"},da34:function(e,t,i){e.exports=i.p+"img/info_plate_big.9bdc4dae.png"},e829:function(e,t,i){e.exports=i.p+"img/floor.352dcc7e.png"},fe94:function(e,t,i){e.exports=i.p+"img/gui.bc341b8a.png"}});
//# sourceMappingURL=app.a298e0f6.js.map