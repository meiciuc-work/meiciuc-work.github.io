(function(t){function e(e){for(var n,s,a=e[0],h=e[1],l=e[2],c=0,v=[];c<a.length;c++)s=a[c],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&v.push(o[s][0]),o[s]=0;for(n in h)Object.prototype.hasOwnProperty.call(h,n)&&(t[n]=h[n]);u&&u(e);while(v.length)v.shift()();return r.push.apply(r,l||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,a=1;a<i.length;a++){var h=i[a];0!==o[h]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},o={app:0},r=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],h=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var u=h;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("cd49")},"1bdf":function(t,e,i){"use strict";i("7d2b")},"309b":function(t,e,i){},"7d2b":function(t,e,i){},"8b55":function(t,e,i){t.exports=i.p+"img/map.6e210f5d.png"},cd49:function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n,o=i("2b0e"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrap_container",attrs:{id:"app"}},[i("game",{staticClass:"wrap_container"})],1)},s=[],a=i("d4ec"),h=i("bee2"),l=i("262e"),u=i("2caf"),c=i("9ab4"),v=(i("309b"),i("1b40")),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{ref:"game",staticClass:"game wrap_container"})])},p=[],f=i("1da1"),_=(i("96cf"),i("d81d"),i("4ec9"),i("d3b7"),i("3ca3"),i("ddb0"),i("8b55")),y=i.n(_),m=i("c29d"),g=function(){function t(){Object(a["a"])(this,t),this.json=null,this.map=new Map}return Object(h["a"])(t,[{key:"execute",value:function(){var t=this,e=[];return e.push(this.loadImage(y.a)),Promise.all(e).then((function(){return Promise.resolve(t)}))}},{key:"getImageFromMap",value:function(t){for(var e=this.map.keys(),i=e.next().value;i;i=e.next().value)if(i.indexOf(t)>-1)return this.map.get(i);return null}},{key:"getTexture",value:function(t){var e=this.getImageFromMap(t);if(e)return m["G"].from(e);if(this.json.frames["".concat(t,".png")]){var i=this.json.frames["".concat(t,".png")],n=this.getImageFromMap("gui"),o=document.createElement("canvas");o.width=i.spriteSourceSize.w,o.height=i.spriteSourceSize.h;var r=o.getContext("2d");return r.drawImage(n,i.frame.x,i.frame.y,i.frame.w,i.frame.h,0,0,o.width,o.height),m["G"].from(o)}return null}},{key:"loadImage",value:function(t){var e=this;return new Promise((function(i){var n=document.createElement("img");n.onload=function(){var o=document.createElement("canvas");o.width=n.width,o.height=n.height;var r=o.getContext("2d");r.drawImage(n,0,0),e.map.set(t,o),i(!0)},n.src=t}))}},{key:"loadJSON",value:function(t){var e=this;return new Promise((function(i){e.json=t,i(!0)}))}}]),t}(),w=i("22a2"),b=i("55a7"),k=i("505b"),O=(i("159b"),i("b64b"),function(t){Object(l["a"])(i,t);var e=Object(u["a"])(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(a["a"])(this,i),t=e.call(this),t.attributes=new Map,t.set(n),t}return Object(h["a"])(i,[{key:"set",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=i&&i.silent,o=new Map;"string"===typeof t?(this.attributes.set(t,i),o.set(t,i),this.emit("change:"+t,{changed:o})):(Object.keys(t).forEach((function(i){e.attributes.set(i,t[i]),o.set(i,t[i])})),Object.keys(t).forEach((function(t){e.emit("change:"+t,{changed:o})}))),n||this.emit("change",{changed:o})}},{key:"get",value:function(t){return this.attributes.has(t)?this.attributes.get(t):null}}]),i}(w["utils"].EventEmitter));(function(t){t[t["user"]=0]="user",t[t["venue"]=1]="venue",t[t["userWithControls"]=2]="userWithControls"})(n||(n={}));var E,P=function t(){Object(a["a"])(this,t),this.WALKER_DEFAULT_SPEED=10,this.QA_BOTS_NUMBER=100,this.QA_VENUES_NUMBER=80},j=new O({worldWidth:9920,worldHeight:9920,zoom:5,cameraRect:new b["Box"](0,0,0,0),hero:null,users:new Map,replicatedUsers:new Map,venues:new Map,usersQT:null,venuesQT:null,config:new P}),R=function(t){Object(l["a"])(i,t);var e=Object(u["a"])(i);function i(){var t;return Object(a["a"])(this,i),t=e.call(this),t.hero=null,t.init(),t}return Object(h["a"])(i,[{key:"init",value:function(){j.get("worldWidth"),j.get("worldHeight");this.drawMainOuterRadius(),this.drawLeftOuterRarius(),this.drawRightOuterRadius()}},{key:"update",value:function(t){this.drawHero()}},{key:"drawHero",value:function(){var t=j.get("hero");t&&(this.hero||(this.hero=new w["Graphics"],this.addChild(this.hero)),this.hero.clear(),this.hero.beginFill(16711680),this.hero.drawCircle(0,0,100),this.hero.alpha=.5,this.hero.endFill(),this.hero.x=t.x,this.hero.y=t.y)}},{key:"drawMainOuterRadius",value:function(){var t=this.getCenter(),e=new w["Graphics"];e.beginFill(65280),e.drawCircle(t.x,t.y,1600),e.endFill(),e.alpha=.1,this.addChild(e)}},{key:"drawLeftOuterRarius",value:function(){var t=new w["Point"](3533,2151),e=new w["Graphics"];e.beginFill(65280),e.drawCircle(t.x,t.y,600),e.endFill(),e.alpha=.1,this.addChild(e)}},{key:"drawRightOuterRadius",value:function(){var t=new w["Point"](6141,7741),e=new w["Graphics"];e.beginFill(65280),e.drawCircle(t.x,t.y,800),e.endFill(),e.alpha=.1,this.addChild(e)}},{key:"getCenter",value:function(){j.get("worldWidth"),j.get("worldHeight");return new w["Point"](5040,4567)}}]),i}(w["Container"]),x=function(t){Object(l["a"])(i,t);var e=Object(u["a"])(i);function i(){return Object(a["a"])(this,i),e.apply(this,arguments)}return i}(w["utils"].EventEmitter),T=new x,M=T;(function(t){t["UPDATE_CAMERA_ZOOM"]="EventType.UPDATE_CAMERA_ZOOM",t["UPDATE_CAMERA_RECT"]="EventType.UPDATE_CAMERA_RECT",t["UPDATE_USERS"]="EventType.UPDATE_USERS",t["UPDATE_VENUES"]="EventType.UPDATE_VENUES",t["UPDATE_PLAYER_POSITION"]="EventType.UPDATE_PLAYER_POSITION",t["POINTERDOWN_ON_VIEWPORT"]="EventType.POINTERDOWN_ON_VIEWPORT"})(E||(E={}));var C=function(t){Object(l["a"])(i,t);var e=Object(u["a"])(i);function i(t){var n;return Object(a["a"])(this,i),n=e.call(this),n._app=t,n._viewport=null,n._viewportFollowTarget=null,n._viewportRectMultiplier=1.2,n._background=null,n._debug=null,n}return Object(h["a"])(i,[{key:"init",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.initViewport(),this.initBackground(),this.initDebugContainer(),M.on(E.UPDATE_CAMERA_ZOOM,this.setupVewportFollowing,this),j.set("zoom",2),null===(e=this._viewport)||void 0===e||e.setZoom(.2),this.setupVewportFollowing();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"update",value:function(t){var e;null===(e=this._debug)||void 0===e||e.update(t);var i=j.get("hero");i&&this._viewportFollowTarget&&(this._viewportFollowTarget.x=i.x,this._viewportFollowTarget.y=i.y)}},{key:"initViewport",value:function(){var t=j.get("worldWidth"),e=j.get("worldHeight");this._viewport=new k["Viewport"]({worldWidth:t,worldHeight:e,interaction:this._app.renderer.plugins.interaction}).drag({factor:.9}).pinch().wheel({percent:.5,smooth:10}).decelerate().clamp({left:!0,right:!0,top:!0,bottom:!0}).clampZoom({maxWidth:t,maxHeight:e}),this._viewport.moveCenter(t/2,e/2),this._viewport.on("moved",this._onViewportMoved,this),this._viewport.on("zoomed",this._onViewportZoomed,this),this.addChild(this._viewport)}},{key:"setupVewportFollowing",value:function(){var t,e=j.get("hero");if(e){this._viewportFollowTarget||(this._viewportFollowTarget=new w["Container"],this._viewportFollowTarget.x=e.x,this._viewportFollowTarget.y=e.y,this.addChild(this._viewportFollowTarget));var i=[100,1e3,1e4],n=j.get("zoom"),o={radius:Math.sqrt(i[n])};null===(t=this._viewport)||void 0===t||t.follow(this._viewportFollowTarget,o)}}},{key:"_onViewportMoved",value:function(t){var e=t.viewport.lastViewport,i=-(null===e||void 0===e?void 0:e.x)/(null===e||void 0===e?void 0:e.scaleX),n=-(null===e||void 0===e?void 0:e.y)/(null===e||void 0===e?void 0:e.scaleY),o=t.viewport.screenWidth/(null===e||void 0===e?void 0:e.scaleX),r=t.viewport.screenHeight/(null===e||void 0===e?void 0:e.scaleY),s=new b["Box"](i+(o-o*this._viewportRectMultiplier)/2,n+(r-r*this._viewportRectMultiplier)/2,o*this._viewportRectMultiplier,r*this._viewportRectMultiplier);j.set("cameraRect",s),M.emit(E.UPDATE_CAMERA_RECT,s)}},{key:"_onViewportZoomed",value:function(t){var e=j.get("layer"),i=0;t.viewport.lastViewport.scaleY>.6&&0!==e?i=0:t.viewport.lastViewport.scaleY<.2&&2!==e?i=2:1!==e&&(i=1),j.set("zoom",i),M.emit(E.UPDATE_CAMERA_ZOOM,i),this.setupVewportFollowing()}},{key:"initBackground",value:function(){var t;this._background=w["Sprite"].from(y.a),null===(t=this._viewport)||void 0===t||t.addChild(this._background)}},{key:"initDebugContainer",value:function(){var t,e,i=this;null===(t=this._viewport)||void 0===t||t.on("click",(function(t){var e=t.data.getLocalPosition(i._background,t.data.global,t.data.global);M.emit(E.POINTERDOWN_ON_VIEWPORT,e)}),this),this._debug=new R,null===(e=this._viewport)||void 0===e||e.addChild(this._debug)}}]),i}(w["Container"]),A=function(){function t(){Object(a["a"])(this,t),this._priority=0}return Object(h["a"])(t,[{key:"priority",get:function(){return this._priority},set:function(t){this._priority=t}},{key:"removedFromEmitter",value:function(t){}},{key:"addedToEmitter",value:function(t){}},{key:"update",value:function(t,e,i){}}]),t}(),Y=function(t){Object(l["a"])(i,t);var e=Object(u["a"])(i);function i(t){var n,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(a["a"])(this,i),n=e.call(this),n._called=!1,n._callBack=t,n._once=o,n}return Object(h["a"])(i,[{key:"update",value:function(t,e,i){this._once&&this._called,this._callBack(),this._called=!0}}]),i}(A),X=function t(){Object(a["a"])(this,t)};X.ZONE_COLLISION="zoneCollision",X.BOUNDING_BOX_COLLISION="boundingBoxCollision";var D=function(t){Object(l["a"])(i,t);var e=Object(u["a"])(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return Object(a["a"])(this,i),t=e.call(this),t.priority=-20,t._left=n,t._top=o,t._right=r,t._bottom=s,t._bounce=h,t}return Object(h["a"])(i,[{key:"left",get:function(){return this._left},set:function(t){this._left=t}},{key:"top",get:function(){return this._top},set:function(t){this._top=t}},{key:"right",get:function(){return this._right},set:function(t){this._right=t}},{key:"bottom",get:function(){return this._bottom},set:function(t){this._bottom=t}},{key:"bounce",get:function(){return this._bounce},set:function(t){this._bounce=t}},{key:"update",value:function(t,e,i){var n,o=e,r=e.collisionRadius,s=!1;if(o.velX>0&&(n=o.x+r)>=this._right?(o.velX=-o.velX*this._bounce,o.x+=2*(this._right-n),s=!0):o.velX<0&&(n=o.x-r)<=this._left&&(o.velX=-o.velX*this._bounce,o.x+=2*(this._left-n),s=!0),o.velY>0&&(n=o.y+r)>=this._bottom?(o.velY=-o.velY*this._bounce,o.y+=2*(this._bottom-n),s=!0):o.velY<0&&(n=o.y-r)<=this._top&&(o.velY=-o.velY*this._bounce,o.y+=2*(this._top-n),s=!0),s&&t.hasEventListener(X.BOUNDING_BOX_COLLISION)){var a={detail:{particle:e,action:this}};t.dispatchEvent(new CustomEvent(X.BOUNDING_BOX_COLLISION,a))}}}]),i}(A),N=function(t){Object(l["a"])(i,t);var e=Object(u["a"])(i);function i(){var t;return Object(a["a"])(this,i),t=e.call(this),t.priority=-10,t}return Object(h["a"])(i,[{key:"update",value:function(t,e,i){e.previousX=e.x,e.previousY=e.y,e.x+=e.velX*i,e.y+=e.velY*i}}]),i}(A),S=function(t){Object(l["a"])(i,t);var e=Object(u["a"])(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(a["a"])(this,i),t=e.call(this),t._power=r,t._x=n,t._y=o,t}return Object(h["a"])(i,[{key:"power",get:function(){return this._power},set:function(t){this._power=t}},{key:"x",get:function(){return this._x},set:function(t){this._x=t}},{key:"y",get:function(){return this._y},set:function(t){this._y=t}},{key:"update",value:function(t,e,i){var n=Math.sqrt(e.velX*e.velX+e.velY*e.velY);if(0!=n){var o=e.velX/n,r=e.velY/n,s=this.power*i,a=this._x-e.x,h=this._y-e.y,l=Math.sqrt(a*a+h*h);if(0!==l){a/=l,h/=l;var u=a*o+h*r,c=a-o*u,v=h-r*u,d=s/Math.sqrt(c*c+v*v);e.velX+=c*d,e.velY+=v*d,d=n/Math.sqrt(e.velX*e.velX+e.velY*e.velY),e.velX*=d,e.velY*=d}}}}]),i}(A),I=function(t){Object(l["a"])(i,t);var e=Object(u["a"])(i);function i(t,n){var o,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(a["a"])(this,i),o=e.call(this),o._action=t,o._zone=n,o._invert=r,o}return Object(h["a"])(i,[{key:"action",get:function(){return this._action},set:function(t){this._action=t}},{key:"zone",get:function(){return this._zone},set:function(t){this._zone=t}},{key:"invertZone",get:function(){return this._invert},set:function(t){this._invert=t}},{key:"priority",get:function(){return this._action.priority},set:function(t){this._action.priority=t}},{key:"addedToEmitter",value:function(t){this._action.addedToEmitter(t)}},{key:"removedFromEmitter",value:function(t){this._action.removedFromEmitter(t)}},{key:"update",value:function(t,e,i){this._zone.contains(e.x,e.y)?this._invert||this._action.update(t,e,i):this._invert&&this._action.update(t,e,i)}}]),i}(A),F=i("2909"),U=(i("fb6a"),i("a434"),i("99af"),function(){function t(){Object(a["a"])(this,t)}return Object(h["a"])(t,[{key:"startEmitter",value:function(t){return 0}},{key:"updateEmitter",value:function(t,e){return 0}},{key:"stop",value:function(){}},{key:"resume",value:function(){}},{key:"complete",get:function(){return!0}},{key:"running",get:function(){return!1}}]),t}()),L=function(){function t(){Object(a["a"])(this,t),this._counter=new U,this._actions=[],this._particles=[],this._maximumFrameTime=.1,this._running=!1,this._eventTypes={},this._eventDispatcher=document.createElement("div")}return Object(h["a"])(t,[{key:"addEventListener",value:function(t,e){this._eventTypes[t]=this._eventTypes[t]?this._eventTypes[t]+1:1,this._eventDispatcher.addEventListener(t,e)}},{key:"removeEventListener",value:function(t,e){this._eventTypes[t]=this._eventTypes[t]&&this._eventTypes[t]>1?this._eventTypes[t]-1:0,this._eventDispatcher.removeEventListener(t,e)}},{key:"hasEventListener",value:function(t){return!!this._eventTypes[t]}},{key:"dispatchEvent",value:function(t){this._eventDispatcher.dispatchEvent(t)}},{key:"counter",get:function(){return this._counter},set:function(t){this._counter=t,this._running&&this._counter.startEmitter(this)}},{key:"actions",get:function(){return this._actions},set:function(t){var e=this;while(this._actions.length){var i;null===(i=this._actions.pop())||void 0===i||i.removedFromEmitter(this)}this._actions=t.slice(),this._actions.sort(this.prioritySort),this._actions.forEach((function(t){t.addedToEmitter(e)}))}},{key:"addAction",value:function(t){var e=this._actions.length,i=0;for(i=0;i<e;++i)if(this._actions[i].priority<t.priority)break;this._actions.splice(i,0,t),t.addedToEmitter(this)}},{key:"removeAction",value:function(t){var e=this._actions.indexOf(t);-1!==e&&(this._actions.splice(e,1),t.removedFromEmitter(this))}},{key:"hasAction",value:function(t){return-1!==this._actions.indexOf(t)}},{key:"particles",get:function(){return this._particles},set:function(t){this.killAllParticles(),this.addParticles(t)}},{key:"addParticle",value:function(t){this._particles.push(t)}},{key:"addParticles",value:function(t){var e;(e=this._particles).splice.apply(e,[this._particles.length,0].concat(Object(F["a"])(t)))}},{key:"removeParticle",value:function(t){var e=this._particles.indexOf(t);return-1!==e&&(this._particles.splice(e,1),!0)}},{key:"removeParticles",value:function(t){for(var e=0;e<t.length;e++)this.removeParticle(t[e])}},{key:"killAllParticles",value:function(){this._particles.splice(0)}},{key:"prioritySort",value:function(t,e){return t.priority-e.priority}},{key:"update",value:function(t){if(t>this._maximumFrameTime&&(t=this._maximumFrameTime),0!==this._particles.length){for(var e=0;e<this._actions.length;e++)for(var i=0;i<this._particles.length;i++)this._actions[e].update(this,this._particles[i],t);for(var n=this._particles.length,o=n;o--;){var r=this._particles[o];r.isDead&&this._particles.splice(o,1)}}}}]),t}(),H=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(a["a"])(this,t),this._left=e,this._top=i,this._right=n,this._bottom=o,this._width=n-e,this._height=o-i}return Object(h["a"])(t,[{key:"left",get:function(){return this._left},set:function(t){this._left=t,isNaN(this._right)||isNaN(this._left)||(this._width=this.right-this.left)}},{key:"right",get:function(){return this._right},set:function(t){this._right=t,isNaN(this._right)||isNaN(this._left)||(this._width=this.right-this.left)}},{key:"top",get:function(){return this._top},set:function(t){this._top=t,isNaN(this._top)||isNaN(this._bottom)||(this._height=this.bottom-this.top)}},{key:"bottom",get:function(){return this._bottom},set:function(t){this._bottom=t,isNaN(this._top)||isNaN(this._bottom)||(this._height=this.bottom-this.top)}},{key:"contains",value:function(t,e){return t>=this._left&&t<=this._right&&e>=this._top&&e<=this._bottom}},{key:"getLocation",value:function(){return{x:this._left+Math.random()*this._width,y:this._top+Math.random()*this._height}}},{key:"getArea",value:function(){return this._width*this._height}},{key:"collideParticle",value:function(t){var e,i,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=!1;return t.velX>0?(e=t.x+t.collisionRadius,i=t.previousX+t.collisionRadius,i<this._left&&e>=this._left?(n=t.previousY+(t.y-t.previousY)*(this._left-i)/(e-i),n>=this._top-t.collisionRadius&&n<=this._bottom+t.collisionRadius&&(t.velX=-t.velX*o,t.x+=2*(this._left-e),r=!0)):i<=this._right&&e>this._right&&(n=t.previousY+(t.y-t.previousY)*(this._right-i)/(e-i),n>=this._top-t.collisionRadius&&n<=this._bottom+t.collisionRadius&&(t.velX=-t.velX*o,t.x+=2*(this._right-e),r=!0))):t.velX<0&&(e=t.x-t.collisionRadius,i=t.previousX-t.collisionRadius,i>this._right&&e<=this._right?(n=t.previousY+(t.y-t.previousY)*(this._right-i)/(e-i),n>=this._top-t.collisionRadius&&n<=this._bottom+t.collisionRadius&&(t.velX=-t.velX*o,t.x+=2*(this._right-e),r=!0)):i>=this._left&&e<this._left&&(n=t.previousY+(t.y-t.previousY)*(this._left-i)/(e-i),n>=this._top-t.collisionRadius&&n<=this._bottom+t.collisionRadius&&(t.velX=-t.velX*o,t.x+=2*(this._left-e),r=!0))),t.velY>0?(e=t.y+t.collisionRadius,i=t.previousY+t.collisionRadius,i<this._top&&e>=this._top?(n=t.previousX+(t.x-t.previousX)*(this._top-i)/(e-i),n>=this._left-t.collisionRadius&&n<=this._right+t.collisionRadius&&(t.velY=-t.velY*o,t.y+=2*(this._top-e),r=!0)):i<=this._bottom&&e>this._bottom&&(n=t.previousX+(t.x-t.previousX)*(this._bottom-i)/(e-i),n>=this._left-t.collisionRadius&&n<=this._right+t.collisionRadius&&(t.velY=-t.velY*o,t.y+=2*(this._bottom-e),r=!0))):t.velY<0&&(e=t.y-t.collisionRadius,i=t.previousY-t.collisionRadius,i>this._bottom&&e<=this._bottom?(n=t.previousX+(t.x-t.previousX)*(this._bottom-i)/(e-i),n>=this._left-t.collisionRadius&&n<=this._right+t.collisionRadius&&(t.velY=-t.velY*o,t.y+=2*(this._bottom-e),r=!0)):i>=this._top&&e<this._top&&(n=t.previousX+(t.x-t.previousX)*(this._top-i)/(e-i),n>=this._left-t.collisionRadius&&n<=this._right+t.collisionRadius&&(t.velY=-t.velY*o,t.y+=2*(this._top-e),r=!0))),r}}]),t}(),Z=(i("143c"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),32),z=function(){function t(){var e=this;Object(a["a"])(this,t),this.keys=new Int32Array(4),this.keyDownHandler=function(t){var i=t.keyCode,n=Math.floor(i/Z);e.keys[n]|=1<<i-n*Z},this.keyUpHandler=function(t){var i=t.keyCode,n=Math.floor(i/Z);e.keys[n]&=~(1<<i-n*Z)},window.addEventListener("keyup",this.keyUpHandler),window.addEventListener("keydown",this.keyDownHandler)}return Object(h["a"])(t,[{key:"isDown",value:function(t){var e=Math.floor(t/Z);return 0!==(this.keys[e]&1<<t-e*Z)}},{key:"isUp",value:function(t){return!this.isDown(t)}}]),t}(),V=65,W=68,B=83,q=87,G=37,Q=39,$=38,J=40,K=function(){function t(){Object(a["a"])(this,t),this.color="#ffffff",this.scale=1,this.mass=1,this.collisionRadius=1,this.lifetime=0,this.age=0,this.energy=1,this.isDead=!1,this._previousColor=this.color}return Object(h["a"])(t,[{key:"initialize",value:function(){this.color="#ffffff",this.scale=1,this.mass=1,this.collisionRadius=1,this.lifetime=0,this.age=0,this.energy=1,this.isDead=!1}},{key:"cloneInto",value:function(t){return t.color=this.color,t.scale=this.scale,t.mass=this.mass,t.collisionRadius=this.collisionRadius,t.lifetime=this.lifetime,t.age=this.age,t.energy=this.energy,t.isDead=this.isDead,t}},{key:"clone",value:function(){return this.cloneInto(new t)}},{key:"revive",value:function(){this.lifetime=0,this.age=0,this.energy=1,this.isDead=!1}}]),t}(),tt=function(t){Object(l["a"])(i,t);var e=Object(u["a"])(i);function i(){var t;return Object(a["a"])(this,i),t=e.apply(this,arguments),t.x=0,t.y=0,t.previousX=0,t.previousY=0,t.velX=0,t.velY=0,t.rotation=0,t.angVelocity=0,t.sortID=-1,t._previousMass=0,t._previousRadius=0,t._inertia=0,t}return Object(h["a"])(i,[{key:"inertia",get:function(){return this.mass===this._previousMass&&this.collisionRadius===this._previousRadius||(this._inertia=this.mass*this.collisionRadius*this.collisionRadius*.5,this._previousMass=this.mass,this._previousRadius=this.collisionRadius),this._inertia}}]),i}(K),et=function(t){Object(l["a"])(i,t);var e=Object(u["a"])(i);function i(t){var n;return Object(a["a"])(this,i),n=e.call(this),n.user=t,n}return i}(tt),it=function(t){Object(l["a"])(i,t);var e=Object(u["a"])(i);function i(){return Object(a["a"])(this,i),e.apply(this,arguments)}return Object(h["a"])(i,[{key:"update",value:function(t,e,i){e.user.x=e.x,e.user.y=e.y}}]),i}(A),nt=function(){function t(){Object(a["a"])(this,t),this.hero=null,this.heroParticle=null,this.heroEmitter=null,this.pointed=!1,this.keyboarded=!1,this.destinationZone=null,this.turnTowardsPoint=null,this.zonedAction=null,this.heroSpeedSqLimitByZoom=[100,1e3,1e4],this.mainEmitter=new L,this.emitters=[],this.keyPoll=new z,this.setupMainEmitter(),this.setupHeroParticle(),this.setupEventManager(),this.createHeroControlModule()}return Object(h["a"])(t,[{key:"update",value:function(t){if(this.hero){this.moveHeroTo();for(var e=0;e<this.emitters.length;e++)this.emitters[e].update(t)}}},{key:"setupEventManager",value:function(){M.on(E.UPDATE_CAMERA_ZOOM,this._onUpdateZoom,this)}},{key:"_onUpdateZoom",value:function(){if(this.heroParticle&&(0!==this.heroParticle.velX||0!==this.heroParticle.velY)){var t=this.heroParticle,e=Math.sqrt(t.velX*t.velX+t.velY*t.velY),i=this.getSpeedLimit();if(e!=i){var n=i/e;t.velX*=n,t.velY*=n}}}},{key:"getSpeedLimit",value:function(){var t=j.get("zoom"),e=this.heroSpeedSqLimitByZoom[t];return Math.sqrt(e)}},{key:"setupMainEmitter",value:function(){var t=this.mainEmitter;t.actions=[new N,new D(10,10,j.get("worldWidth")-10,j.get("worldHeight")-10),new it],this.emitters.push(t)}},{key:"setupHeroParticle",value:function(){this.hero=j.get("hero"),this.heroParticle=new et(this.hero),this.heroParticle.x=this.hero.x,this.heroParticle.y=this.hero.y,this.heroParticle.velX=10,this.heroParticle.velY=10,this.mainEmitter.addParticle(this.heroParticle)}},{key:"pointHeroTo",value:function(t){var e=this;if(this.heroParticle&&this.heroEmitter){this.pointed=!0,this.keyboarded=!this.pointed,this.turnTowardsPoint||(this.turnTowardsPoint=new S,this.turnTowardsPoint.power=100,this.heroEmitter.addAction(this.turnTowardsPoint)),this.turnTowardsPoint.x=t.x,this.turnTowardsPoint.y=t.y;var i=t.x-this.heroParticle.x,n=t.y-this.heroParticle.y,o=Math.sqrt(i*i+n*n);i/=o,n/=o;var r=this.getSpeedLimit();this.heroParticle.velX=i*r,this.heroParticle.velY=n*r,this.destinationZone||(this.destinationZone=new H,this.zonedAction=new I(new Y((function(){e.pointHeroToStop(),e.heroParticle&&(e.heroParticle.velX=0,e.heroParticle.velY=0)}),!1),this.destinationZone),this.heroEmitter.addAction(this.zonedAction));var s=10;this.destinationZone.left=t.x-s,this.destinationZone.top=t.y-s,this.destinationZone.right=t.x+s,this.destinationZone.bottom=t.y+s}}},{key:"moveHeroTo",value:function(){var t=j.get("zoom"),e=Math.sqrt(this.heroSpeedSqLimitByZoom[t]),i=!1;this.heroParticle&&this.heroEmitter&&(this.keyPoll.isDown(q)||this.keyPoll.isDown($)?(i=!0,this.heroParticle.velY=-e):this.keyPoll.isDown(B)||this.keyPoll.isDown(J)?(i=!0,this.heroParticle.velY=e):this.pointed||(this.heroParticle.velY=0),this.keyPoll.isDown(V)||this.keyPoll.isDown(G)?(i=!0,this.heroParticle.velX=-e):this.keyPoll.isDown(W)||this.keyPoll.isDown(Q)?(i=!0,this.heroParticle.velX=e):this.pointed||(this.heroParticle.velX=0),i?this.pointHeroToStop():this.keyboarded&&(this.keyboarded=!1,this.heroParticle.velX=0,this.heroParticle.velY=0))}},{key:"pointHeroToStop",value:function(){this.pointed=!1,this.heroParticle&&this.heroEmitter&&(this.turnTowardsPoint&&(this.heroEmitter.removeAction(this.turnTowardsPoint),this.turnTowardsPoint=null),this.zonedAction&&(this.heroEmitter.removeAction(this.zonedAction),this.zonedAction=null,this.destinationZone=null))}},{key:"createHeroControlModule",value:function(){var t=this;this.heroEmitter=new L,this.heroEmitter.addParticle(this.heroParticle),this.emitters.push(this.heroEmitter),M.on(E.POINTERDOWN_ON_VIEWPORT,(function(e){var i,n;console.log("pointHeroTo",e),console.log("heroPosition",null===(i=t.heroParticle)||void 0===i?void 0:i.x,null===(n=t.heroParticle)||void 0===n?void 0:n.y),t.pointHeroTo(e)}))}}]),t}(),ot=function(){function t(e){Object(a["a"])(this,t),this._containerElement=e,this._app=null,this._renderer=null,this._stage=null,this._mapContainer=null,this._movements=null,this.init()}return Object(h["a"])(t,[{key:"init",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.initHero();case 2:return t.next=4,this.initMovements();case 4:return t.next=6,this.initAssest();case 6:return t.next=8,this.initRenderer();case 8:return t.next=10,this.initMap();case 10:null===(e=this._app)||void 0===e||e.ticker.add(this.update,this);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"update",value:function(t){var e,i;null===(e=this._movements)||void 0===e||e.update(t),null===(i=this._mapContainer)||void 0===i||i.update(t)}},{key:"initHero",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=j.get("worldWidth"),i=j.get("worldHeight"),o={id:""+Date.now(),type:n.user,x:e/2,y:i/2,data:{videoUrlString:"",avatarUrlString:"",dotColor:Math.floor(16777215*Math.random())}},j.set("hero",o);case 4:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"initMovements",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this._movements=new nt;case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"initAssest",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new g,t.next=3,e.execute();case 3:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"initRenderer",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this._app=new w["Application"]({transparent:!0,antialias:!0,resizeTo:this._containerElement,backgroundColor:1096601,resolution:window.devicePixelRatio}),this._renderer=this._app.renderer,this._stage=this._app.stage,this._containerElement.appendChild(this._app.view),this._app.start();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"initMap",value:function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this._mapContainer=new C(this._app),t.next=3,this._mapContainer.init();case 3:null===(e=this._stage)||void 0===e||e.addChild(this._mapContainer);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),rt=function(t){Object(l["a"])(i,t);var e=Object(u["a"])(i);function i(){return Object(a["a"])(this,i),e.apply(this,arguments)}return Object(h["a"])(i,[{key:"mounted",value:function(){var t=this;setTimeout((function(){new ot(t.$refs.game)}),100)}},{key:"destroyed",value:function(){console.log("Game","destroyed")}},{key:"handleClick",value:function(){console.log(" CLICK")}}]),i}(v["b"]);rt=Object(c["a"])([Object(v["a"])({components:{}})],rt);var st=rt,at=st,ht=(i("1bdf"),i("2877")),lt=Object(ht["a"])(at,d,p,!1,null,"cc5a28ae",null),ut=lt.exports,ct=function(t){Object(l["a"])(i,t);var e=Object(u["a"])(i);function i(){return Object(a["a"])(this,i),e.apply(this,arguments)}return Object(h["a"])(i,[{key:"mounted",value:function(){console.log("App mounted")}}]),i}(v["b"]);ct=Object(c["a"])([Object(v["a"])({components:{Game:ut}})],ct);var vt=ct,dt=vt,pt=Object(ht["a"])(dt,r,s,!1,null,null,null),ft=pt.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(ft)}}).$mount("#app")}});
//# sourceMappingURL=app.05f7eb15.js.map